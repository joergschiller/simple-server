#!/usr/bin/env ruby

require "optparse"
require "rack"

options = { :port => 8080 }

OptionParser.new do |opts|
  opts.banner = "Usage: #{$0}"
  opts.on("-p", "--port PORT", "use PORT (default: 8080)") { |port| options[:port] = port }
end.parse!

app = Rack::Builder.app do
  use Rack::Static, :urls => [""], :root => Dir.pwd, :index => "index.html"
  run lambda { |env| [404, { "Content-Type" => "text/plain" }, "Not Found"] }
end

Rack::Server.start :Port => options[:port], :app => app, :environment => "deployment"
